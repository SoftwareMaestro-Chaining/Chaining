<div class="topology-container" ng-app="exampleApp">
  <script>
          var datasets = [];

          function sink(dataset) {
  	   datasets.push(dataset);
          }
  </script>
      <!-- <div class="col s12 m6 l6"> -->
        <kubernetes-topology-graph items="data.items" relations="data.relations" kinds="kinds" id="topology-toggle-item"></kubernetes-topology-graph>
      <!-- </div> -->

      <div class="col controls">
         <label id="selected_vertex"></label>
         <button ng-click="poke()">Poke</button><br>

         <kubernetes-topology-icon kind="Pod">
           <svg class="kube-topology">
             <use xlink:href="#vertex-Pod" x="15" y="15"></use>
           </svg>
         </kubernetes-topology-icon>
         <label>Pods</label>

         <kubernetes-topology-icon kind="Service">
           <svg class="kube-topology">
             <use xlink:href="#vertex-Service" x="15" y="15"></use>
           </svg>
         </kubernetes-topology-icon>
         <label>Services</label>
<br>
         <kubernetes-topology-icon kind="Node">
           <svg class="kube-topology">
             <use xlink:href="#vertex-Node" x="15" y="15"></use>
           </svg>
         </kubernetes-topology-icon>
         <label>Nodes</label>

         <kubernetes-topology-icon kind="ReplicationController">
           <svg class="kube-topology">
             <use xlink:href="#vertex-ReplicationController" x="15" y="15"></use>
           </svg>
         </kubernetes-topology-icon>
         <label>Replication Controllers</label>
      </div>

      <svg class="kube-topology" hidden>
        <defs>
          <g class="Node" id="vertex-Node">
            <circle r="15" fill="#fff" stroke="#aaa"></circle>
            <text y="7" fill="#636363" font-family="PatternFlyIcons-webfont" font-size="18px" text-anchor="middle">&#xe621;</text>
          </g>
          <g class="Pod" id="vertex-Pod">
            <circle r="15" fill="#fff" stroke="#aaa"></circle>
            <text y="5" x="0.5" fill="#1186C1" font-family="FontAwesome" font-size="16px" text-anchor="middle">&#xf1b3;</text>
          </g>
          <g class="Service" id="vertex-Service">
            <circle r="15" fill="#fff" stroke="#aaa"></circle>
            <text y="8" x="-2" fill="#ff7f0e" font-family="PatternFlyIcons-webfont" font-size="18px" text-anchor="middle">&#xe61e;</text>
          </g>
          <g class="ReplicationController" id="vertex-ReplicationController">
            <circle r="15" fill="#fff" stroke="#aaa"></circle>
            <text y="7.5" x="-1" fill="#9467bd" font-family="PatternFlyIcons-webfont" font-size="20px" text-anchor="middle">&#xe624;</text>
          </g>
        </defs>
      </svg>
</div>

<button id="topology-toggle-btn" class="btn-classic mdi-action-aspect-ratio"><br>on/off</button>


    <script type="text/javascript">

        angular.module('exampleApp', ['kubernetesUI'])
	    .run(function($rootScope) {
                var index = 0;
                $rootScope.data = datasets[index];

                $rootScope.kinds = {
                  Pod: '#vertex-Pod',
                  ReplicationController: '#vertex-ReplicationController',
                  Node: '#vertex-Node',
                  Service: '#vertex-Service',
                };

                $rootScope.poke = function() {
                   index += 1;
                   $rootScope.data = datasets[index % datasets.length];
                };

		            $rootScope.$on("select", function(ev, item) {
                   var text = "";
                   if (item)
                       text = "Selected: " + item.metadata.name;
                   angular.element(document.getElementById("selected_vertex")).text(text);
                });
            });
    </script>



    <!-- <script src="/scratch/test.jsonp"></script> -->
    <!-- JSONP data sets to load -->
    <script src="/workspaces/<%=workspace._id%>/all.jsonp"></script>
    <!-- // <script src="/scratch/data-set-1.jsonp"></script> -->
    <!-- <script src="scratch/data-set-2.jsonp"></script> -->